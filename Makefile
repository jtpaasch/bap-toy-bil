SRC := src
SRC_FILES := $(wildcard $(SRC)/*.ml) $(wildcard $(SRC)/*.mli)
EXE := main.exe

#####################################################
# DEFAULT
#####################################################

.DEFAULT_GOAL := all

.PHONY: all
all:
	$(MAKE) clean
	$(MAKE) build


#####################################################
# CLEAN
#####################################################

.PHONEY: clean
clean:
	dune clean


#####################################################
# BUILD
#####################################################

build: $(SRC_FILES)
	dune build $(SRC)/$(EXE)


#####################################################
# PARSE (RUN)
#####################################################

.PHONY: parse
parse:
	dune exec $(SRC)/$(EXE) $(file)
